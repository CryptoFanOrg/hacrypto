<html>
<head>
<!--
     Copyright (c) 1998-2014 The OpenSSL Project, http://www.openssl.org/
     Author:   OpenSSL (openssl@openssl.org)
     Modified: 2014-09-01 06:00:31.
     Generated from ``ca.wml'' via WML 2.0.11 (19-Aug-2006).
               by OpenSSL (openssl@openssl.org)
               on 2014-09-01 06:00:34.

     DO NOT EDIT THIS FILE DIRECTLY! INSTEAD EDIT ``ca.wml''.
-->
<meta name="Copyright" content="1998-2014 The OpenSSL Project, http://www.openssl.org/">
<meta name="Author"    content="OpenSSL, openssl@openssl.org">
<meta name="Generator" content="WML 2.0.11 (19-Aug-2006)">
<meta name="Modified"  content="2014-09-01 06:00:31">
<title>OpenSSL: Documents, ca(1)</title>
<style type="text/css"><!--
BODY { position: absolute; left: 0px; top: 0px; background: #666699; }
A { text-decoration: none; font-weight: bold; }
A:link { text-decoration: none; font-weight: bold; color: #666699; }
A:visited { text-decoration: none; font-weight: bold; color: #666699; }
A:hover { text-decoration: none; font-weight: bold; color: #666699; text-decoration: underline; }
#red { color: #cc3333; }
#sf { font-family: arial,helvetica; font-variant: normal; font-style: normal; }
#sfl { font-weight: bold; font-family: arial,helvetica; font-size: 16pt; line-height: 16pt; font-variant: normal; font-style: normal; }
H1 { font-weight: bold; font-size: 18pt; line-height: 18pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H2 { font-weight: bold; font-size: 14pt; line-height: 14pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H3 { font-weight: bold; font-size: 12pt; line-height: 12pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
--></style>
</head>
<body link="#6666cc" alink="#6666cc" vlink="#6666cc" bgcolor="#666699" text="#000000"
      marginheight="0" leftmargin="0" rightmargin="0" topmargin="0">
<table width="100%" cellspacing="0" cellpadding="0" border="0" summary="">
  <tr><td align="left" width="100" bgcolor="#666699"><img src="../../images/page-head-tl.jpg" alt="OpenSSL" width="100" height="80"></td><td align="left" colspan="2" width="600" bgcolor="#666699"><img src="../../images/page-head-tm.jpg" alt="" width="600" height="80"></td><td align="right" width="20" bgcolor="#666699">&nbsp;&nbsp;&nbsp;</td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" width="100"><img src="../../images/page-head-bl.jpg" alt="" width="100" height="20"></td><td align="left" width="20"><img src="../../images/page-head-bm.jpg" alt="" width="20" height="20"></td><td align="left" width="100%" bgcolor="#ffffff">
<table cellspacing="0" cellpadding="0" border="0" summary="">
        <tr>
<td><font face="Arial,Helvetica">&nbsp;<a href="../index.html" onmouseover="self.status = '../'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../'; return true" onblur="self.status = ''; return true"><font color="#666666">Documents</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="openssl.html" onmouseover="self.status = '../apps/openssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../apps/openssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">openssl(1)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../ssl/ssl.html" onmouseover="self.status = '../ssl/ssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../ssl/ssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">ssl(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../crypto/crypto.html" onmouseover="self.status = '../crypto/crypto.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../crypto/crypto.html'; return true" onblur="self.status = ''; return true"><font color="#666666">crypto(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../HOWTO/index.html" onmouseover="self.status = '../HOWTO/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../HOWTO/'; return true" onblur="self.status = ''; return true"><font color="#666666">HOWTO</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://wiki.openssl.org/" onmouseover="self.status = 'http://wiki.openssl.org/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = 'http://wiki.openssl.org/'; return true" onblur="self.status = ''; return true"><font color="#666666">Wiki</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../fips/index.html" onmouseover="self.status = '../fips/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../fips/'; return true" onblur="self.status = ''; return true"><font color="#666666">FIPS140</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../misc/index.html" onmouseover="self.status = '../misc/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../misc/'; return true" onblur="self.status = ''; return true"><font color="#666666">misc</font></a></font>&nbsp;</td><td></td>
</tr>
      </table>
</td><td align="right" width="20"><img src="../../images/page-corner-tr.gif" alt="" width="20" height="20"></td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" valign="top" width="100" bgcolor="#666699"><table cellspacing="0" cellpadding="0" border="0" summary=""><tr><td><img src="../../images/page-navbar-top.jpg" alt="" width="100" height="11"></td></tr>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
function nb_imgNormal(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_n.src');
        self.status = '';
    }
}
function nb_imgSelect(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_s.src');
        self.status = '';
    }
}
function nb_imgOver(imgName, nohints, descript) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_o.src');
        if (! nohints) self.status = descript;
    }
}
// done hiding -->
</script>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_title_n = new Image();
    nb_img1_title_n.src = '../../images/page-navbar-ti-n.jpg';
    nb_img1_title_o = new Image();
    nb_img1_title_o.src = '../../images/page-navbar-ti-s.jpg';
    nb_img1_FAQ_n = new Image();
    nb_img1_FAQ_n.src = '../../images/page-navbar-fq-n.jpg';
    nb_img1_FAQ_o = new Image();
    nb_img1_FAQ_o.src = '../../images/page-navbar-fq-s.jpg';
    nb_img1_about_n = new Image();
    nb_img1_about_n.src = '../../images/page-navbar-ab-n.jpg';
    nb_img1_about_o = new Image();
    nb_img1_about_o.src = '../../images/page-navbar-ab-s.jpg';
    nb_img1_news_n = new Image();
    nb_img1_news_n.src = '../../images/page-navbar-ne-n.jpg';
    nb_img1_news_o = new Image();
    nb_img1_news_o.src = '../../images/page-navbar-ne-s.jpg';
    nb_img1_docs_s = new Image();
    nb_img1_docs_s.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_docs_o = new Image();
    nb_img1_docs_o.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_source_n = new Image();
    nb_img1_source_n.src = '../../images/page-navbar-so-n.jpg';
    nb_img1_source_o = new Image();
    nb_img1_source_o.src = '../../images/page-navbar-so-s.jpg';
    nb_img1_contrib_n = new Image();
    nb_img1_contrib_n.src = '../../images/page-navbar-co-n.jpg';
    nb_img1_contrib_o = new Image();
    nb_img1_contrib_o.src = '../../images/page-navbar-co-s.jpg';
    nb_img1_support_n = new Image();
    nb_img1_support_n.src = '../../images/page-navbar-su-n.jpg';
    nb_img1_support_o = new Image();
    nb_img1_support_o.src = '../../images/page-navbar-su-s.jpg';
    nb_img1_related_n = new Image();
    nb_img1_related_n.src = '../../images/page-navbar-re-n.jpg';
    nb_img1_related_o = new Image();
    nb_img1_related_o.src = '../../images/page-navbar-re-s.jpg';
}
// done hiding -->
</script>
<tr><td><a href="../../index.html" onmouseover="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onmouseout="nb_imgNormal('nb_img1_title'); return true" onfocus="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onblur="nb_imgNormal('nb_img1_title'); return true"><img name="nb_img1_title" src="../../images/page-navbar-ti-n.jpg" alt="Title" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../support/faq.html" onmouseover="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onmouseout="nb_imgNormal('nb_img1_FAQ'); return true" onfocus="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onblur="nb_imgNormal('nb_img1_FAQ'); return true"><img name="nb_img1_FAQ" src="../../images/page-navbar-fq-n.jpg" alt="FAQ" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../about/index.html" onmouseover="nb_imgOver('nb_img1_about', 0, 'About'); return true" onmouseout="nb_imgNormal('nb_img1_about'); return true" onfocus="nb_imgOver('nb_img1_about', 0, 'About'); return true" onblur="nb_imgNormal('nb_img1_about'); return true"><img name="nb_img1_about" src="../../images/page-navbar-ab-n.jpg" alt="About" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../news/index.html" onmouseover="nb_imgOver('nb_img1_news', 0, 'News'); return true" onmouseout="nb_imgNormal('nb_img1_news'); return true" onfocus="nb_imgOver('nb_img1_news', 0, 'News'); return true" onblur="nb_imgNormal('nb_img1_news'); return true"><img name="nb_img1_news" src="../../images/page-navbar-ne-n.jpg" alt="News" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../index.html" onmouseover="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onmouseout="nb_imgSelect('nb_img1_docs'); return true" onfocus="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onblur="nb_imgSelect('nb_img1_docs'); return true"><img name="nb_img1_docs" src="../../images/page-navbar-do-s.jpg" alt="Documents" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../source/index.html" onmouseover="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onmouseout="nb_imgNormal('nb_img1_source'); return true" onfocus="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onblur="nb_imgNormal('nb_img1_source'); return true"><img name="nb_img1_source" src="../../images/page-navbar-so-n.jpg" alt="Source" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../contrib/index.html" onmouseover="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onmouseout="nb_imgNormal('nb_img1_contrib'); return true" onfocus="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onblur="nb_imgNormal('nb_img1_contrib'); return true"><img name="nb_img1_contrib" src="../../images/page-navbar-co-n.jpg" alt="Contribution" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../support/index.html" onmouseover="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onmouseout="nb_imgNormal('nb_img1_support'); return true" onfocus="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onblur="nb_imgNormal('nb_img1_support'); return true"><img name="nb_img1_support" src="../../images/page-navbar-su-n.jpg" alt="Support" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../related/index.html" onmouseover="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onmouseout="nb_imgNormal('nb_img1_related'); return true" onfocus="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onblur="nb_imgNormal('nb_img1_related'); return true"><img name="nb_img1_related" src="../../images/page-navbar-re-n.jpg" alt="Related" border="0" width="100" height="27"></a></td></tr>
    <tr><td><img src="../../images/page-navbar-bot.jpg" alt="" width="100" height="150"><br><p></td></tr>
  </table>
</td><td align="left" valign="top" width="20" bgcolor="#ffffff">&nbsp;</td><td align="left" valign="top" bgcolor="#ffffff"><br>
        
<h1>ca(1)</h1>
<!-- INDEX BEGIN -->
<UL>
	<LI><A HREF="ca.html#NAME">NAME</A>
	<LI><A HREF="ca.html#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="ca.html#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="ca.html#CA_OPTIONS">CA OPTIONS</A>
	<LI><A HREF="ca.html#CRL_OPTIONS">CRL OPTIONS</A>
	<LI><A HREF="ca.html#CONFIGURATION_FILE_OPTIONS">CONFIGURATION FILE OPTIONS</A>
	<LI><A HREF="ca.html#POLICY_FORMAT">POLICY FORMAT</A>
	<LI><A HREF="ca.html#SPKAC_FORMAT">SPKAC FORMAT</A>
	<LI><A HREF="ca.html#EXAMPLES">EXAMPLES</A>
	<LI><A HREF="ca.html#FILES">FILES</A>
	<LI><A HREF="ca.html#ENVIRONMENT_VARIABLES">ENVIRONMENT VARIABLES</A>
	<LI><A HREF="ca.html#RESTRICTIONS">RESTRICTIONS</A>
	<LI><A HREF="ca.html#BUGS">BUGS</A>
	<LI><A HREF="ca.html#WARNINGS">WARNINGS</A>
	<LI><A HREF="ca.html#SEE_ALSO">SEE ALSO</A>
</UL>
<!-- INDEX END -->
<HR>
<P>
<HR>
<H1><A NAME="NAME">NAME</A></H1>
<P>
ca - sample minimal CA application
</P>
<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<STRONG>openssl</STRONG>  <STRONG>ca</STRONG>
&#91;<STRONG>-verbose</STRONG>&#93; &#91;<STRONG>-config filename</STRONG>&#93; &#91;<STRONG>-name section</STRONG>&#93; &#91;<STRONG>-gencrl</STRONG>&#93; &#91;<STRONG>-revoke file</STRONG>&#93; &#91;<STRONG>-status serial</STRONG>&#93; &#91;<STRONG>-updatedb</STRONG>&#93; &#91;<STRONG>-crl_reason reason</STRONG>&#93; &#91;<STRONG>-crl_hold instruction</STRONG>&#93; &#91;<STRONG>-crl_compromise time</STRONG>&#93; &#91;<STRONG>-crl_CA_compromise time</STRONG>&#93; &#91;<STRONG>-crldays days</STRONG>&#93; &#91;<STRONG>-crlhours hours</STRONG>&#93; &#91;<STRONG>-crlexts section</STRONG>&#93; &#91;<STRONG>-startdate date</STRONG>&#93; &#91;<STRONG>-enddate date</STRONG>&#93; &#91;<STRONG>-days arg</STRONG>&#93; &#91;<STRONG>-md arg</STRONG>&#93; &#91;<STRONG>-policy arg</STRONG>&#93; &#91;<STRONG>-keyfile arg</STRONG>&#93; &#91;<STRONG>-keyform PEM|DER</STRONG>&#93; &#91;<STRONG>-key arg</STRONG>&#93; &#91;<STRONG>-passin arg</STRONG>&#93; &#91;<STRONG>-cert file</STRONG>&#93; &#91;<STRONG>-selfsign</STRONG>&#93; &#91;<STRONG>-in file</STRONG>&#93; &#91;<STRONG>-out file</STRONG>&#93; &#91;<STRONG>-notext</STRONG>&#93; &#91;<STRONG>-outdir dir</STRONG>&#93; &#91;<STRONG>-infiles</STRONG>&#93; &#91;<STRONG>-spkac file</STRONG>&#93; &#91;<STRONG>-ss_cert file</STRONG>&#93; &#91;<STRONG>-preserveDN</STRONG>&#93; &#91;<STRONG>-noemailDN</STRONG>&#93; &#91;<STRONG>-batch</STRONG>&#93; &#91;<STRONG>-msie_hack</STRONG>&#93; &#91;<STRONG>-extensions section</STRONG>&#93; &#91;<STRONG>-extfile section</STRONG>&#93; &#91;<STRONG>-engine id</STRONG>&#93; &#91;<STRONG>-subj arg</STRONG>&#93; &#91;<STRONG>-utf8</STRONG>&#93; &#91;<STRONG>-multivalue-rdn</STRONG>&#93;
</P>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
The <STRONG>ca</STRONG> command is a minimal CA application. It can be used to sign certificate
requests in a variety of forms and generate CRLs it also maintains a text
database of issued certificates and their status.
</P>
<P>
The options descriptions will be divided into each purpose.
</P>
<P>
<HR>
<H1><A NAME="CA_OPTIONS">CA OPTIONS</A></H1>
<DL>
<DT><STRONG><A NAME="item__config"><STRONG>-config filename</STRONG></A></STRONG><DD>
<P>
specifies the configuration file to use.
</P>
<DT><STRONG><A NAME="item__name"><STRONG>-name section</STRONG></A></STRONG><DD>
<P>
specifies the configuration file section to use (overrides
<STRONG>default_ca</STRONG> in the <STRONG>ca</STRONG> section).
</P>
<DT><STRONG><A NAME="item__in"><STRONG>-in filename</STRONG></A></STRONG><DD>
<P>
an input filename containing a single certificate request to be signed by
the CA.
</P>
<DT><STRONG><A NAME="item__ss_cert"><STRONG>-ss_cert filename</STRONG></A></STRONG><DD>
<P>
a single self signed certificate to be signed by the CA.
</P>
<DT><STRONG><A NAME="item__spkac"><STRONG>-spkac filename</STRONG></A></STRONG><DD>
<P>
a file containing a single Netscape signed public key and challenge and
additional field values to be signed by the CA. See the <STRONG>SPKAC FORMAT</STRONG>
section for information on the required input and output format.
</P>
<DT><STRONG><A NAME="item__infiles"><STRONG>-infiles</STRONG></A></STRONG><DD>
<P>
if present this should be the last option, all subsequent arguments are
assumed to the the names of files containing certificate requests.
</P>
<DT><STRONG><A NAME="item__out"><STRONG>-out filename</STRONG></A></STRONG><DD>
<P>
the output file to output certificates to. The default is standard output.
The certificate details will also be printed out to this file in PEM format
(except that <STRONG>-spkac</STRONG> outputs DER format).
</P>
<DT><STRONG><A NAME="item__outdir"><STRONG>-outdir directory</STRONG></A></STRONG><DD>
<P>
the directory to output certificates to. The certificate will be written to
a filename consisting of the serial number in hex with ``.pem'' appended.
</P>
<DT><STRONG><A NAME="item__cert"><STRONG>-cert</STRONG></A></STRONG><DD>
<P>
the CA certificate file.
</P>
<DT><STRONG><A NAME="item__keyfile"><STRONG>-keyfile filename</STRONG></A></STRONG><DD>
<P>
the private key to sign requests with.
</P>
<DT><STRONG><A NAME="item__keyform"><STRONG>-keyform PEM|DER</STRONG></A></STRONG><DD>
<P>
the format of the data in the private key file. The default is PEM.
</P>
<DT><STRONG><A NAME="item__key"><STRONG>-key password</STRONG></A></STRONG><DD>
<P>
the password used to encrypt the private key. Since on some systems the
command line arguments are visible (e.g. Unix with the 'ps' utility) this
option should be used with caution.
</P>
<DT><STRONG><A NAME="item__selfsign"><STRONG>-selfsign</STRONG></A></STRONG><DD>
<P>
indicates the issued certificates are to be signed with the key the
certificate requests were signed with (given with <STRONG>-keyfile</STRONG>). Certificate requests signed with a different key are ignored. If
<STRONG>-spkac</STRONG>, <STRONG>-ss_cert</STRONG> or <STRONG>-gencrl</STRONG> are given, <STRONG>-selfsign</STRONG> is ignored.
</P>
<P>
A consequence of using <STRONG>-selfsign</STRONG> is that the self-signed certificate appears among the entries in the
certificate database (see the configuration option <STRONG>database</STRONG>), and uses the same serial number counter as all other certificates sign
with the self-signed certificate.
</P>
<DT><STRONG><A NAME="item__passin"><STRONG>-passin arg</STRONG></A></STRONG><DD>
<P>
the key password source. For more information about the format of <STRONG>arg</STRONG>
see the <STRONG>PASS PHRASE ARGUMENTS</STRONG> section in <A HREF="openssl.html#">openssl(1)</A>.
</P>
<DT><STRONG><A NAME="item__verbose"><STRONG>-verbose</STRONG></A></STRONG><DD>
<P>
this prints extra details about the operations being performed.
</P>
<DT><STRONG><A NAME="item__notext"><STRONG>-notext</STRONG></A></STRONG><DD>
<P>
don't output the text form of a certificate to the output file.
</P>
<DT><STRONG><A NAME="item__startdate"><STRONG>-startdate date</STRONG></A></STRONG><DD>
<P>
this allows the start date to be explicitly set. The format of the date is
YYMMDDHHMMSSZ (the same as an ASN1 UTCTime structure).
</P>
<DT><STRONG><A NAME="item__enddate"><STRONG>-enddate date</STRONG></A></STRONG><DD>
<P>
this allows the expiry date to be explicitly set. The format of the date is
YYMMDDHHMMSSZ (the same as an ASN1 UTCTime structure).
</P>
<DT><STRONG><A NAME="item__days"><STRONG>-days arg</STRONG></A></STRONG><DD>
<P>
the number of days to certify the certificate for.
</P>
<DT><STRONG><A NAME="item__md"><STRONG>-md alg</STRONG></A></STRONG><DD>
<P>
the message digest to use. Possible values include md5, sha1 and mdc2. This
option also applies to CRLs.
</P>
<DT><STRONG><A NAME="item__policy"><STRONG>-policy arg</STRONG></A></STRONG><DD>
<P>
this option defines the CA ``policy'' to use. This is a section in the
configuration file which decides which fields should be mandatory or match
the CA certificate. Check out the <STRONG>POLICY FORMAT</STRONG> section for more information.
</P>
<DT><STRONG><A NAME="item__msie_hack"><STRONG>-msie_hack</STRONG></A></STRONG><DD>
<P>
this is a legacy option to make <STRONG>ca</STRONG> work with very old versions of the IE certificate enrollment control
``certenr3''. It used UniversalStrings for almost everything. Since the old
control has various security bugs its use is strongly discouraged. The
newer control ``Xenroll'' does not need this option.
</P>
<DT><STRONG><A NAME="item__preserveDN"><STRONG>-preserveDN</STRONG></A></STRONG><DD>
<P>
Normally the DN order of a certificate is the same as the order of the
fields in the relevant policy section. When this option is set the order is
the same as the request. This is largely for compatibility with the older
IE enrollment control which would only accept certificates if their DNs
match the order of the request. This is not needed for Xenroll.
</P>
<DT><STRONG><A NAME="item__noemailDN"><STRONG>-noemailDN</STRONG></A></STRONG><DD>
<P>
The DN of a certificate can contain the EMAIL field if present in the
request DN, however it is good policy just having the e-mail set into the
altName extension of the certificate. When this option is set the EMAIL
field is removed from the certificate' subject and set only in the,
eventually present, extensions. The <STRONG>email_in_dn</STRONG> keyword can be used in the configuration file to enable this behaviour.
</P>
<DT><STRONG><A NAME="item__batch"><STRONG>-batch</STRONG></A></STRONG><DD>
<P>
this sets the batch mode. In this mode no questions will be asked and all
certificates will be certified automatically.
</P>
<DT><STRONG><A NAME="item__extensions"><STRONG>-extensions section</STRONG></A></STRONG><DD>
<P>
the section of the configuration file containing certificate extensions to
be added when a certificate is issued (defaults to <STRONG>x509_extensions</STRONG>
unless the <STRONG>-extfile</STRONG> option is used). If no extension section is present then, a V1 certificate
is created. If the extension section is present (even if it is empty), then
a V3 certificate is created. See the:w
<A HREF="x509v3_config.html#">x509v3_config(5)</A> manual page for details of the extension section format.
</P>
<DT><STRONG><A NAME="item__extfile"><STRONG>-extfile file</STRONG></A></STRONG><DD>
<P>
an additional configuration file to read certificate extensions from (using
the default section unless the <STRONG>-extensions</STRONG> option is also used).
</P>
<DT><STRONG><A NAME="item__engine"><STRONG>-engine id</STRONG></A></STRONG><DD>
<P>
specifying an engine (by its unique <STRONG>id</STRONG> string) will cause <STRONG>ca</STRONG>
to attempt to obtain a functional reference to the specified engine, thus
initialising it if needed. The engine will then be set as the default for
all available algorithms.
</P>
<DT><STRONG><A NAME="item__subj"><STRONG>-subj arg</STRONG></A></STRONG><DD>
<P>
supersedes subject name given in the request. The arg must be formatted as <EM>/type0=value0/type1=value1/type2=...</EM>, characters may be escaped by \ (backslash), no spaces are skipped.
</P>
<DT><STRONG><A NAME="item__utf8"><STRONG>-utf8</STRONG></A></STRONG><DD>
<P>
this option causes field values to be interpreted as UTF8 strings, by
default they are interpreted as ASCII. This means that the field values,
whether prompted from a terminal or obtained from a configuration file,
must be valid UTF8 strings.
</P>
<DT><STRONG><A NAME="item__multivalue_rdn"><STRONG>-multivalue-rdn</STRONG></A></STRONG><DD>
<P>
This option causes the -subj argument to be interpretedt with full support
for multivalued RDNs. Example:
</P>
<P>
<EM>/DC=org/DC=OpenSSL/DC=users/UID=123456+CN=John Doe</EM>
</P>
<P>
If -multi-rdn is not used then the UID value is <EM>123456+CN=John Doe</EM>.
</P>
</DL>
<P>
<HR>
<H1><A NAME="CRL_OPTIONS">CRL OPTIONS</A></H1>
<DL>
<DT><STRONG><A NAME="item__gencrl"><STRONG>-gencrl</STRONG></A></STRONG><DD>
<P>
this option generates a CRL based on information in the index file.
</P>
<DT><STRONG><A NAME="item__crldays"><STRONG>-crldays num</STRONG></A></STRONG><DD>
<P>
the number of days before the next CRL is due. That is the days from now to
place in the CRL nextUpdate field.
</P>
<DT><STRONG><A NAME="item__crlhours"><STRONG>-crlhours num</STRONG></A></STRONG><DD>
<P>
the number of hours before the next CRL is due.
</P>
<DT><STRONG><A NAME="item__revoke"><STRONG>-revoke filename</STRONG></A></STRONG><DD>
<P>
a filename containing a certificate to revoke.
</P>
<DT><STRONG><A NAME="item__status"><STRONG>-status serial</STRONG></A></STRONG><DD>
<P>
displays the revocation status of the certificate with the specified serial
number and exits.
</P>
<DT><STRONG><A NAME="item__updatedb"><STRONG>-updatedb</STRONG></A></STRONG><DD>
<P>
Updates the database index to purge expired certificates.
</P>
<DT><STRONG><A NAME="item__crl_reason"><STRONG>-crl_reason reason</STRONG></A></STRONG><DD>
<P>
revocation reason, where <STRONG>reason</STRONG> is one of: <STRONG>unspecified</STRONG>, <STRONG>keyCompromise</STRONG>,
<STRONG>CACompromise</STRONG>, <STRONG>affiliationChanged</STRONG>, <STRONG>superseded</STRONG>, <STRONG>cessationOfOperation</STRONG>,
<STRONG>certificateHold</STRONG> or <STRONG>removeFromCRL</STRONG>. The matching of <STRONG>reason</STRONG> is case insensitive. Setting any revocation reason will make the CRL v2.
</P>
<P>
In practice <STRONG>removeFromCRL</STRONG> is not particularly useful because it is only used in delta CRLs which are
not currently implemented.
</P>
<DT><STRONG><A NAME="item__crl_hold"><STRONG>-crl_hold instruction</STRONG></A></STRONG><DD>
<P>
This sets the CRL revocation reason code to <STRONG>certificateHold</STRONG> and the hold instruction to <STRONG>instruction</STRONG> which must be an OID. Although any OID can be used only <STRONG>holdInstructionNone</STRONG> (the use of which is discouraged by RFC2459)
<STRONG>holdInstructionCallIssuer</STRONG> or <STRONG>holdInstructionReject</STRONG> will normally be used.
</P>
<DT><STRONG><A NAME="item__crl_compromise"><STRONG>-crl_compromise time</STRONG></A></STRONG><DD>
<P>
This sets the revocation reason to <STRONG>keyCompromise</STRONG> and the compromise time to
<STRONG>time</STRONG>. <STRONG>time</STRONG> should be in GeneralizedTime format that is <STRONG>YYYYMMDDHHMMSSZ</STRONG>.
</P>
<DT><STRONG><A NAME="item__crl_CA_compromise"><STRONG>-crl_CA_compromise time</STRONG></A></STRONG><DD>
<P>
This is the same as <STRONG>crl_compromise</STRONG> except the revocation reason is set to
<STRONG>CACompromise</STRONG>.
</P>
<DT><STRONG><A NAME="item__crlexts"><STRONG>-crlexts section</STRONG></A></STRONG><DD>
<P>
the section of the configuration file containing CRL extensions to include.
If no CRL extension section is present then a V1 CRL is created, if the CRL
extension section is present (even if it is empty) then a V2 CRL is
created. The CRL extensions specified are CRL extensions and <STRONG>not</STRONG> CRL entry extensions. It should be noted that some software (for example
Netscape) can't handle V2 CRLs. See
<A HREF="x509v3_config.html#">x509v3_config(5)</A> manual page for details of the extension section format.
</P>
</DL>
<P>
<HR>
<H1><A NAME="CONFIGURATION_FILE_OPTIONS">CONFIGURATION FILE OPTIONS</A></H1>
<P>
The section of the configuration file containing options for <STRONG>ca</STRONG>
is found as follows: If the <STRONG>-name</STRONG> command line option is used, then it names the section to be used.
Otherwise the section to be used must be named in the <STRONG>default_ca</STRONG> option of the <STRONG>ca</STRONG> section of the configuration file (or in the default section of the
configuration file). Besides <STRONG>default_ca</STRONG>, the following options are read directly from the <STRONG>ca</STRONG> section: RANDFILE preserve msie_hack With the exception of <STRONG>RANDFILE</STRONG>, this is probably a bug and may change in future releases.
</P>
<P>
Many of the configuration file options are identical to command line
options. Where the option is present in the configuration file and the
command line the command line value is used. Where an option is described
as mandatory then it must be present in the configuration file or the
command line equivalent (if any) used.
</P>
<DL>
<DT><STRONG><A NAME="item_oid_file"><STRONG>oid_file</STRONG></A></STRONG><DD>
<P>
This specifies a file containing additional <STRONG>OBJECT IDENTIFIERS</STRONG>. Each line of the file should consist of the numerical form of the object
identifier followed by white space then the short name followed by white
space and finally the long name.
</P>
<DT><STRONG><A NAME="item_oid_section"><STRONG>oid_section</STRONG></A></STRONG><DD>
<P>
This specifies a section in the configuration file containing extra object
identifiers. Each line should consist of the short name of the object
identifier followed by <STRONG>=</STRONG> and the numerical form. The short and long names are the same when this
option is used.
</P>
<DT><STRONG><A NAME="item_new_certs_dir"><STRONG>new_certs_dir</STRONG></A></STRONG><DD>
<P>
the same as the <STRONG>-outdir</STRONG> command line option. It specifies the directory where new certificates will
be placed. Mandatory.
</P>
<DT><STRONG><A NAME="item_certificate"><STRONG>certificate</STRONG></A></STRONG><DD>
<P>
the same as <STRONG>-cert</STRONG>. It gives the file containing the CA certificate. Mandatory.
</P>
<DT><STRONG><A NAME="item_private_key"><STRONG>private_key</STRONG></A></STRONG><DD>
<P>
same as the <STRONG>-keyfile</STRONG> option. The file containing the CA private key. Mandatory.
</P>
<DT><STRONG><A NAME="item_RANDFILE"><STRONG>RANDFILE</STRONG></A></STRONG><DD>
<P>
a file used to read and write random number seed information, or an EGD
socket (see <A HREF="../crypto/RAND_egd.html#">RAND_egd(3)</A>).
</P>
<DT><STRONG><A NAME="item_default_days"><STRONG>default_days</STRONG></A></STRONG><DD>
<P>
the same as the <STRONG>-days</STRONG> option. The number of days to certify a certificate for.
</P>
<DT><STRONG><A NAME="item_default_startdate"><STRONG>default_startdate</STRONG></A></STRONG><DD>
<P>
the same as the <STRONG>-startdate</STRONG> option. The start date to certify a certificate for. If not set the current
time is used.
</P>
<DT><STRONG><A NAME="item_default_enddate"><STRONG>default_enddate</STRONG></A></STRONG><DD>
<P>
the same as the <STRONG>-enddate</STRONG> option. Either this option or
<STRONG>default_days</STRONG> (or the command line equivalents) must be present.
</P>
<DT><STRONG><A NAME="item_default_crl_hours"><STRONG>default_crl_hours default_crl_days</STRONG></A></STRONG><DD>
<P>
the same as the <STRONG>-crlhours</STRONG> and the <STRONG>-crldays</STRONG> options. These will only be used if neither command line option is present.
At least one of these must be present to generate a CRL.
</P>
<DT><STRONG><A NAME="item_default_md"><STRONG>default_md</STRONG></A></STRONG><DD>
<P>
the same as the <STRONG>-md</STRONG> option. The message digest to use. Mandatory.
</P>
<DT><STRONG><A NAME="item_database"><STRONG>database</STRONG></A></STRONG><DD>
<P>
the text database file to use. Mandatory. This file must be present though
initially it will be empty.
</P>
<DT><STRONG><A NAME="item_unique_subject"><STRONG>unique_subject</STRONG></A></STRONG><DD>
<P>
if the value <STRONG>yes</STRONG> is given, the valid certificate entries in the database must have unique
subjects. if the value <STRONG>no</STRONG> is given, several valid certificate entries may have the exact same
subject. The default value is <STRONG>yes</STRONG>, to be compatible with older (pre 0.9.8) versions of OpenSSL. However, to
make CA certificate roll-over easier, it's recommended to use the value <STRONG>no</STRONG>, especially if combined with the <STRONG>-selfsign</STRONG> command line option.
</P>
<DT><STRONG><A NAME="item_serial"><STRONG>serial</STRONG></A></STRONG><DD>
<P>
a text file containing the next serial number to use in hex. Mandatory.
This file must be present and contain a valid serial number.
</P>
<DT><STRONG><A NAME="item_crlnumber"><STRONG>crlnumber</STRONG></A></STRONG><DD>
<P>
a text file containing the next CRL number to use in hex. The crl number
will be inserted in the CRLs only if this file exists. If this file is
present, it must contain a valid CRL number.
</P>
<DT><STRONG><A NAME="item_x509_extensions"><STRONG>x509_extensions</STRONG></A></STRONG><DD>
<P>
the same as <STRONG>-extensions</STRONG>.
</P>
<DT><STRONG><A NAME="item_crl_extensions"><STRONG>crl_extensions</STRONG></A></STRONG><DD>
<P>
the same as <STRONG>-crlexts</STRONG>.
</P>
<DT><STRONG><A NAME="item_preserve"><STRONG>preserve</STRONG></A></STRONG><DD>
<P>
the same as <STRONG>-preserveDN</STRONG>
</P>
<DT><STRONG><A NAME="item_email_in_dn"><STRONG>email_in_dn</STRONG></A></STRONG><DD>
<P>
the same as <STRONG>-noemailDN</STRONG>. If you want the EMAIL field to be removed from the DN of the certificate
simply set this to 'no'. If not present the default is to allow for the
EMAIL filed in the certificate's DN.
</P>
<DT><STRONG><A NAME="item_msie_hack"><STRONG>msie_hack</STRONG></A></STRONG><DD>
<P>
the same as <STRONG>-msie_hack</STRONG>
</P>
<DT><STRONG><A NAME="item_policy"><STRONG>policy</STRONG></A></STRONG><DD>
<P>
the same as <STRONG>-policy</STRONG>. Mandatory. See the <STRONG>POLICY FORMAT</STRONG> section for more information.
</P>
<DT><STRONG><A NAME="item_name_opt"><STRONG>name_opt</STRONG>, <STRONG>cert_opt</STRONG></A></STRONG><DD>
<P>
these options allow the format used to display the certificate details when
asking the user to confirm signing. All the options supported by the <STRONG>x509</STRONG> utilities <STRONG>-nameopt</STRONG> and <STRONG>-certopt</STRONG> switches can be used here, except the <STRONG>no_signame</STRONG> and <STRONG>no_sigdump</STRONG> are permanently set and cannot be disabled (this is because the certificate
signature cannot be displayed because the certificate has not been signed
at this point).
</P>
<P>
For convenience the values <STRONG>ca_default</STRONG> are accepted by both to produce a reasonable output.
</P>
<P>
If neither option is present the format used in earlier versions of OpenSSL
is used. Use of the old format is <STRONG>strongly</STRONG> discouraged because it only displays fields mentioned in the <STRONG>policy</STRONG> section, mishandles multicharacter string types and does not display
extensions.
</P>
<DT><STRONG><A NAME="item_copy_extensions"><STRONG>copy_extensions</STRONG></A></STRONG><DD>
<P>
determines how extensions in certificate requests should be handled. If set
to <STRONG>none</STRONG> or this option is not present then extensions are ignored and not copied to
the certificate. If set to <STRONG>copy</STRONG> then any extensions present in the request that are not already present are
copied to the certificate. If set to <STRONG>copyall</STRONG> then all extensions in the request are copied to the certificate: if the
extension is already present in the certificate it is deleted first. See
the <STRONG>WARNINGS</STRONG> section before using this option.
</P>
<P>
The main use of this option is to allow a certificate request to supply
values for certain extensions such as subjectAltName.
</P>
</DL>
<P>
<HR>
<H1><A NAME="POLICY_FORMAT">POLICY FORMAT</A></H1>
<P>
The policy section consists of a set of variables corresponding to
certificate DN fields. If the value is ``match'' then the field value must
match the same field in the CA certificate. If the value is ``supplied''
then it must be present. If the value is ``optional'' then it may be
present. Any fields not mentioned in the policy section are silently
deleted, unless the <STRONG>-preserveDN</STRONG> option is set but this can be regarded more of a quirk than intended
behaviour.
</P>
<P>
<HR>
<H1><A NAME="SPKAC_FORMAT">SPKAC FORMAT</A></H1>
<P>
The input to the <STRONG>-spkac</STRONG> command line option is a Netscape signed public key and challenge. This
will usually come from the <STRONG>KEYGEN</STRONG> tag in an HTML form to create a new private key. It is however possible to
create SPKACs using the <STRONG>spkac</STRONG> utility.
</P>
<P>
The file should contain the variable SPKAC set to the value of the SPKAC
and also the required DN components as name value pairs. If you need to
include the same component twice then it can be preceded by a number and a
'.'.
</P>
<P>
When processing SPKAC format, the output is DER if the <STRONG>-out</STRONG>
flag is used, but PEM format if sending to stdout or the <STRONG>-outdir</STRONG>
flag is used.
</P>
<P>
<HR>
<H1><A NAME="EXAMPLES">EXAMPLES</A></H1>
<P>
Note: these examples assume that the <STRONG>ca</STRONG> directory structure is already set up and the relevant files already exist.
This usually involves creating a CA certificate and private key with <STRONG>req</STRONG>, a serial number file and an empty index file and placing them in the
relevant directories.
</P>
<P>
To use the sample configuration file below the directories demoCA,
demoCA/private and demoCA/newcerts would be created. The CA certificate
would be copied to demoCA/cacert.pem and its private key to
demoCA/private/cakey.pem. A file demoCA/serial would be created containing
for example ``01'' and the empty index file demoCA/index.txt.
</P>
<P>
Sign a certificate request:
</P>
<PRE> openssl ca -in req.pem -out newcert.pem
</PRE>
<P>
Sign a certificate request, using CA extensions:
</P>
<PRE> openssl ca -in req.pem -extensions v3_ca -out newcert.pem
</PRE>
<P>
Generate a CRL
</P>
<PRE> openssl ca -gencrl -out crl.pem
</PRE>
<P>
Sign several requests:
</P>
<PRE> openssl ca -infiles req1.pem req2.pem req3.pem
</PRE>
<P>
Certify a Netscape SPKAC:
</P>
<PRE> openssl ca -spkac spkac.txt
</PRE>
<P>
A sample SPKAC file (the SPKAC line has been truncated for clarity):
</P>
<PRE> SPKAC=MIG0MGAwXDANBgkqhkiG9w0BAQEFAANLADBIAkEAn7PDhCeV/xIxUg8V70YRxK2A5
 CN=Steve Test
 emailAddress=steve@openssl.org
 0.OU=OpenSSL Group
 1.OU=Another Group
</PRE>
<P>
A sample configuration file with the relevant sections for <STRONG>ca</STRONG>:
</P>
<PRE> &#91; ca &#93;
 default_ca      = CA_default            # The default ca section
 
 &#91; CA_default &#93;
</PRE>
<PRE> dir            = ./demoCA              # top dir
 database       = $dir/index.txt        # index file.
 new_certs_dir  = $dir/newcerts         # new certs dir
 
 certificate    = $dir/cacert.pem       # The CA cert
 serial         = $dir/serial           # serial no file
 private_key    = $dir/private/cakey.pem# CA private key
 RANDFILE       = $dir/private/.rand    # random number file
 
 default_days   = 365                   # how long to certify for
 default_crl_days= 30                   # how long before next CRL
 default_md     = md5                   # md to use
</PRE>
<PRE> policy         = policy_any            # default policy
 email_in_dn    = no                    # Don't add the email into cert DN
</PRE>
<PRE> name_opt       = ca_default            # Subject name display option
 cert_opt       = ca_default            # Certificate display option
 copy_extensions = none                 # Don't copy extensions from request
</PRE>
<PRE> &#91; policy_any &#93;
 countryName            = supplied
 stateOrProvinceName    = optional
 organizationName       = optional
 organizationalUnitName = optional
 commonName             = supplied
 emailAddress           = optional
</PRE>
<P>
<HR>
<H1><A NAME="FILES">FILES</A></H1>
<P>
Note: the location of all files can change either by compile time options,
configuration file entries, environment variables or command line options.
The values below reflect the default values.
</P>
<PRE> /usr/local/ssl/lib/openssl.cnf - master configuration file
 ./demoCA                       - main CA directory
 ./demoCA/cacert.pem            - CA certificate
 ./demoCA/private/cakey.pem     - CA private key
 ./demoCA/serial                - CA serial number file
 ./demoCA/serial.old            - CA serial number backup file
 ./demoCA/index.txt             - CA text database file
 ./demoCA/index.txt.old         - CA text database backup file
 ./demoCA/certs                 - certificate output file
 ./demoCA/.rnd                  - CA random seed information
</PRE>
<P>
<HR>
<H1><A NAME="ENVIRONMENT_VARIABLES">ENVIRONMENT VARIABLES</A></H1>
<P>
<STRONG>OPENSSL_CONF</STRONG> reflects the location of master configuration file it can be overridden by
the <STRONG>-config</STRONG> command line option.
</P>
<P>
<HR>
<H1><A NAME="RESTRICTIONS">RESTRICTIONS</A></H1>
<P>
The text database index file is a critical part of the process and if
corrupted it can be difficult to fix. It is theoretically possible to
rebuild the index file from all the issued certificates and a current CRL:
however there is no option to do this.
</P>
<P>
V2 CRL features like delta CRLs are not currently supported.
</P>
<P>
Although several requests can be input and handled at once it is only
possible to include one SPKAC or self signed certificate.
</P>
<P>
<HR>
<H1><A NAME="BUGS">BUGS</A></H1>
<P>
The use of an in memory text database can cause problems when large numbers
of certificates are present because, as the name implies the database has
to be kept in memory.
</P>
<P>
The <STRONG>ca</STRONG> command really needs rewriting or the required functionality exposed at
either a command or interface level so a more friendly utility (perl script
or GUI) can handle things properly. The scripts <STRONG>CA.sh</STRONG> and
<STRONG>CA.pl</STRONG> help a little but not very much.
</P>
<P>
Any fields in a request that are not present in a policy are silently
deleted. This does not happen if the <STRONG>-preserveDN</STRONG> option is used. To enforce the absence of the EMAIL field within the DN, as
suggested by RFCs, regardless the contents of the request' subject the <STRONG>-noemailDN</STRONG>
option can be used. The behaviour should be more friendly and configurable.
</P>
<P>
Canceling some commands by refusing to certify a certificate can create an
empty file.
</P>
<P>
<HR>
<H1><A NAME="WARNINGS">WARNINGS</A></H1>
<P>
The <STRONG>ca</STRONG> command is quirky and at times downright unfriendly.
</P>
<P>
The <STRONG>ca</STRONG> utility was originally meant as an example of how to do things in a CA. It
was not supposed to be used as a full blown CA itself: nevertheless some
people are using it for this purpose.
</P>
<P>
The <STRONG>ca</STRONG> command is effectively a single user command: no locking is done on the
various files and attempts to run more than one <STRONG>ca</STRONG> command on the same database can have unpredictable results.
</P>
<P>
The <STRONG>copy_extensions</STRONG> option should be used with caution. If care is not taken then it can be a
security risk. For example if a certificate request contains a
basicConstraints extension with CA:TRUE and the
<STRONG>copy_extensions</STRONG> value is set to <STRONG>copyall</STRONG> and the user does not spot this when the certificate is displayed then this
will hand the requester a valid CA certificate.
</P>
<P>
This situation can be avoided by setting <STRONG>copy_extensions</STRONG> to <STRONG>copy</STRONG>
and including basicConstraints with CA:FALSE in the configuration file.
Then if the request contains a basicConstraints extension it will be
ignored.
</P>
<P>
It is advisable to also include values for other extensions such as <STRONG>keyUsage</STRONG> to prevent a request supplying its own values.
</P>
<P>
Additional restrictions can be placed on the CA certificate itself. For
example if the CA certificate has:
</P>
<PRE> basicConstraints = CA:TRUE, pathlen:0
</PRE>
<P>
then even if a certificate is issued with CA:TRUE it will not be valid.
</P>
<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<A HREF="req.html#">req(1)</A>, <A HREF="spkac.html#">spkac(1)</A>, <A HREF="x509.html#">x509(1)</A>, <A HREF="CA.pl.html#">CA.pl(1)</A>,
<A HREF="config.html#">config(5)</A>, <A HREF="x509v3_config.html#">x509v3_config(5)</A>
</P>
        </td><td align="right" width="20" bgcolor="#ffffff">&nbsp;&nbsp;&nbsp;</td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" valign="top" width="100" bgcolor="#666699">&nbsp;</td><td align="left" width="20"><img src="../../images/page-corner-bl.gif" alt="" width="20" height="20"></td><td align="left" valign="top" bgcolor="#ffffff">&nbsp;</td><td align="right" width="20"><img src="../../images/page-corner-br.gif" alt="" width="20" height="20"></td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td colspan="5" bgcolor="#666699">&nbsp;</td></tr>
</table>
</body>
</html>

