<html>
<head>
<!--
     Copyright (c) 1998-2014 The OpenSSL Project, http://www.openssl.org/
     Author:   OpenSSL (openssl@openssl.org)
     Modified: 2014-06-18 01:00:03.
     Generated from ``pkcs12.wml'' via WML 2.0.11 (19-Aug-2006).
               by OpenSSL (openssl@openssl.org)
               on 2014-06-18 01:00:09.

     DO NOT EDIT THIS FILE DIRECTLY! INSTEAD EDIT ``pkcs12.wml''.
-->
<meta name="Copyright" content="1998-2014 The OpenSSL Project, http://www.openssl.org/">
<meta name="Author"    content="OpenSSL, openssl@openssl.org">
<meta name="Generator" content="WML 2.0.11 (19-Aug-2006)">
<meta name="Modified"  content="2014-06-18 01:00:03">
<title>OpenSSL: Documents, pkcs12(1)</title>
<style type="text/css"><!--
BODY { position: absolute; left: 0px; top: 0px; background: #666699; }
A { text-decoration: none; font-weight: bold; }
A:link { text-decoration: none; font-weight: bold; color: #666699; }
A:visited { text-decoration: none; font-weight: bold; color: #666699; }
A:hover { text-decoration: none; font-weight: bold; color: #666699; text-decoration: underline; }
#red { color: #cc3333; }
#sf { font-family: arial,helvetica; font-variant: normal; font-style: normal; }
#sfl { font-weight: bold; font-family: arial,helvetica; font-size: 16pt; line-height: 16pt; font-variant: normal; font-style: normal; }
H1 { font-weight: bold; font-size: 18pt; line-height: 18pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H2 { font-weight: bold; font-size: 14pt; line-height: 14pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H3 { font-weight: bold; font-size: 12pt; line-height: 12pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
--></style>
</head>
<body link="#6666cc" alink="#6666cc" vlink="#6666cc" bgcolor="#666699" text="#000000"
      marginheight="0" leftmargin="0" rightmargin="0" topmargin="0">
<table width="100%" cellspacing="0" cellpadding="0" border="0" summary="">
  <tr><td align="left" width="100" bgcolor="#666699"><img src="../../images/page-head-tl.jpg" alt="OpenSSL" width="100" height="80"></td><td align="left" colspan="2" width="600" bgcolor="#666699"><img src="../../images/page-head-tm.jpg" alt="" width="600" height="80"></td><td align="right" width="20" bgcolor="#666699">&nbsp;&nbsp;&nbsp;</td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" width="100"><img src="../../images/page-head-bl.jpg" alt="" width="100" height="20"></td><td align="left" width="20"><img src="../../images/page-head-bm.jpg" alt="" width="20" height="20"></td><td align="left" width="100%" bgcolor="#ffffff">
<table cellspacing="0" cellpadding="0" border="0" summary="">
        <tr>
<td><font face="Arial,Helvetica">&nbsp;<a href="../index.html" onmouseover="self.status = '../'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../'; return true" onblur="self.status = ''; return true"><font color="#666666">Documents</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="openssl.html" onmouseover="self.status = '../apps/openssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../apps/openssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">openssl(1)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../ssl/ssl.html" onmouseover="self.status = '../ssl/ssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../ssl/ssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">ssl(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../crypto/crypto.html" onmouseover="self.status = '../crypto/crypto.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../crypto/crypto.html'; return true" onblur="self.status = ''; return true"><font color="#666666">crypto(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../HOWTO/index.html" onmouseover="self.status = '../HOWTO/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../HOWTO/'; return true" onblur="self.status = ''; return true"><font color="#666666">HOWTO</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://wiki.openssl.org/" onmouseover="self.status = 'http://wiki.openssl.org/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = 'http://wiki.openssl.org/'; return true" onblur="self.status = ''; return true"><font color="#666666">Wiki</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../fips/index.html" onmouseover="self.status = '../fips/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../fips/'; return true" onblur="self.status = ''; return true"><font color="#666666">FIPS140</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../misc/index.html" onmouseover="self.status = '../misc/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../misc/'; return true" onblur="self.status = ''; return true"><font color="#666666">misc</font></a></font>&nbsp;</td><td></td>
</tr>
      </table>
</td><td align="right" width="20"><img src="../../images/page-corner-tr.gif" alt="" width="20" height="20"></td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" valign="top" width="100" bgcolor="#666699"><table cellspacing="0" cellpadding="0" border="0" summary=""><tr><td><img src="../../images/page-navbar-top.jpg" alt="" width="100" height="11"></td></tr>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
function nb_imgNormal(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_n.src');
        self.status = '';
    }
}
function nb_imgSelect(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_s.src');
        self.status = '';
    }
}
function nb_imgOver(imgName, nohints, descript) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_o.src');
        if (! nohints) self.status = descript;
    }
}
// done hiding -->
</script>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_title_n = new Image();
    nb_img1_title_n.src = '../../images/page-navbar-ti-n.jpg';
    nb_img1_title_o = new Image();
    nb_img1_title_o.src = '../../images/page-navbar-ti-s.jpg';
    nb_img1_FAQ_n = new Image();
    nb_img1_FAQ_n.src = '../../images/page-navbar-fq-n.jpg';
    nb_img1_FAQ_o = new Image();
    nb_img1_FAQ_o.src = '../../images/page-navbar-fq-s.jpg';
    nb_img1_about_n = new Image();
    nb_img1_about_n.src = '../../images/page-navbar-ab-n.jpg';
    nb_img1_about_o = new Image();
    nb_img1_about_o.src = '../../images/page-navbar-ab-s.jpg';
    nb_img1_news_n = new Image();
    nb_img1_news_n.src = '../../images/page-navbar-ne-n.jpg';
    nb_img1_news_o = new Image();
    nb_img1_news_o.src = '../../images/page-navbar-ne-s.jpg';
    nb_img1_docs_s = new Image();
    nb_img1_docs_s.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_docs_o = new Image();
    nb_img1_docs_o.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_source_n = new Image();
    nb_img1_source_n.src = '../../images/page-navbar-so-n.jpg';
    nb_img1_source_o = new Image();
    nb_img1_source_o.src = '../../images/page-navbar-so-s.jpg';
    nb_img1_contrib_n = new Image();
    nb_img1_contrib_n.src = '../../images/page-navbar-co-n.jpg';
    nb_img1_contrib_o = new Image();
    nb_img1_contrib_o.src = '../../images/page-navbar-co-s.jpg';
    nb_img1_support_n = new Image();
    nb_img1_support_n.src = '../../images/page-navbar-su-n.jpg';
    nb_img1_support_o = new Image();
    nb_img1_support_o.src = '../../images/page-navbar-su-s.jpg';
    nb_img1_related_n = new Image();
    nb_img1_related_n.src = '../../images/page-navbar-re-n.jpg';
    nb_img1_related_o = new Image();
    nb_img1_related_o.src = '../../images/page-navbar-re-s.jpg';
}
// done hiding -->
</script>
<tr><td><a href="../../index.html" onmouseover="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onmouseout="nb_imgNormal('nb_img1_title'); return true" onfocus="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onblur="nb_imgNormal('nb_img1_title'); return true"><img name="nb_img1_title" src="../../images/page-navbar-ti-n.jpg" alt="Title" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../support/faq.html" onmouseover="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onmouseout="nb_imgNormal('nb_img1_FAQ'); return true" onfocus="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onblur="nb_imgNormal('nb_img1_FAQ'); return true"><img name="nb_img1_FAQ" src="../../images/page-navbar-fq-n.jpg" alt="FAQ" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../about/index.html" onmouseover="nb_imgOver('nb_img1_about', 0, 'About'); return true" onmouseout="nb_imgNormal('nb_img1_about'); return true" onfocus="nb_imgOver('nb_img1_about', 0, 'About'); return true" onblur="nb_imgNormal('nb_img1_about'); return true"><img name="nb_img1_about" src="../../images/page-navbar-ab-n.jpg" alt="About" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../news/index.html" onmouseover="nb_imgOver('nb_img1_news', 0, 'News'); return true" onmouseout="nb_imgNormal('nb_img1_news'); return true" onfocus="nb_imgOver('nb_img1_news', 0, 'News'); return true" onblur="nb_imgNormal('nb_img1_news'); return true"><img name="nb_img1_news" src="../../images/page-navbar-ne-n.jpg" alt="News" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../index.html" onmouseover="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onmouseout="nb_imgSelect('nb_img1_docs'); return true" onfocus="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onblur="nb_imgSelect('nb_img1_docs'); return true"><img name="nb_img1_docs" src="../../images/page-navbar-do-s.jpg" alt="Documents" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../source/index.html" onmouseover="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onmouseout="nb_imgNormal('nb_img1_source'); return true" onfocus="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onblur="nb_imgNormal('nb_img1_source'); return true"><img name="nb_img1_source" src="../../images/page-navbar-so-n.jpg" alt="Source" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../contrib/index.html" onmouseover="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onmouseout="nb_imgNormal('nb_img1_contrib'); return true" onfocus="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onblur="nb_imgNormal('nb_img1_contrib'); return true"><img name="nb_img1_contrib" src="../../images/page-navbar-co-n.jpg" alt="Contribution" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../support/index.html" onmouseover="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onmouseout="nb_imgNormal('nb_img1_support'); return true" onfocus="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onblur="nb_imgNormal('nb_img1_support'); return true"><img name="nb_img1_support" src="../../images/page-navbar-su-n.jpg" alt="Support" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../related/index.html" onmouseover="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onmouseout="nb_imgNormal('nb_img1_related'); return true" onfocus="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onblur="nb_imgNormal('nb_img1_related'); return true"><img name="nb_img1_related" src="../../images/page-navbar-re-n.jpg" alt="Related" border="0" width="100" height="27"></a></td></tr>
    <tr><td><img src="../../images/page-navbar-bot.jpg" alt="" width="100" height="150"><br><p></td></tr>
  </table>
</td><td align="left" valign="top" width="20" bgcolor="#ffffff">&nbsp;</td><td align="left" valign="top" bgcolor="#ffffff"><br>
        
<h1>pkcs12(1)</h1>
<!-- INDEX BEGIN -->
<UL>
	<LI><A HREF="pkcs12.html#NAME">NAME</A>
	<LI><A HREF="pkcs12.html#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="pkcs12.html#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="pkcs12.html#COMMAND_OPTIONS">COMMAND OPTIONS</A>
	<LI><A HREF="pkcs12.html#PARSING_OPTIONS">PARSING OPTIONS</A>
	<LI><A HREF="pkcs12.html#FILE_CREATION_OPTIONS">FILE CREATION OPTIONS</A>
	<LI><A HREF="pkcs12.html#NOTES">NOTES</A>
	<LI><A HREF="pkcs12.html#EXAMPLES">EXAMPLES</A>
	<LI><A HREF="pkcs12.html#BUGS">BUGS</A>
	<LI><A HREF="pkcs12.html#SEE_ALSO">SEE ALSO</A>
</UL>
<!-- INDEX END -->
<HR>
<P>
<HR>
<H1><A NAME="NAME">NAME</A></H1>
<P>
pkcs12 - PKCS#12 file utility
</P>
<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<STRONG>openssl</STRONG>  <STRONG>pkcs12</STRONG>
&#91;<STRONG>-export</STRONG>&#93; &#91;<STRONG>-chain</STRONG>&#93; &#91;<STRONG>-inkey filename</STRONG>&#93; &#91;<STRONG>-certfile filename</STRONG>&#93; &#91;<STRONG>-name name</STRONG>&#93; &#91;<STRONG>-caname name</STRONG>&#93; &#91;<STRONG>-in filename</STRONG>&#93; &#91;<STRONG>-out filename</STRONG>&#93; &#91;<STRONG>-noout</STRONG>&#93; &#91;<STRONG>-nomacver</STRONG>&#93; &#91;<STRONG>-nocerts</STRONG>&#93; &#91;<STRONG>-clcerts</STRONG>&#93; &#91;<STRONG>-cacerts</STRONG>&#93; &#91;<STRONG>-nokeys</STRONG>&#93; &#91;<STRONG>-info</STRONG>&#93; &#91;<STRONG>-des | -des3 | -idea | -aes128 | -aes192 | -aes256 | -camellia128 | -camellia192 | -camellia256 | -nodes</STRONG>&#93; &#91;<STRONG>-noiter</STRONG>&#93; &#91;<STRONG>-maciter | -nomaciter | -nomac</STRONG>&#93; &#91;<STRONG>-twopass</STRONG>&#93; &#91;<STRONG>-descert</STRONG>&#93; &#91;<STRONG>-certpbe cipher</STRONG>&#93; &#91;<STRONG>-keypbe cipher</STRONG>&#93; &#91;<STRONG>-macalg digest</STRONG>&#93; &#91;<STRONG>-keyex</STRONG>&#93; &#91;<STRONG>-keysig</STRONG>&#93; &#91;<STRONG>-password arg</STRONG>&#93; &#91;<STRONG>-passin arg</STRONG>&#93; &#91;<STRONG>-passout arg</STRONG>&#93; &#91;<STRONG>-rand file(s)</STRONG>&#93; &#91;<STRONG>-CAfile file</STRONG>&#93; &#91;<STRONG>-CApath dir</STRONG>&#93; &#91;<STRONG>-CSP name</STRONG>&#93;
</P>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
The <STRONG>pkcs12</STRONG> command allows PKCS#12 files (sometimes referred to as PFX files) to be
created and parsed. PKCS#12 files are used by several programs including
Netscape, MSIE and MS Outlook.
</P>
<P>
<HR>
<H1><A NAME="COMMAND_OPTIONS">COMMAND OPTIONS</A></H1>
<P>
There are a lot of options the meaning of some depends of whether a PKCS#12
file is being created or parsed. By default a PKCS#12 file is parsed. A
PKCS#12 file can be created by using the <STRONG>-export</STRONG> option (see below).
</P>
<P>
<HR>
<H1><A NAME="PARSING_OPTIONS">PARSING OPTIONS</A></H1>
<DL>
<DT><STRONG><A NAME="item__in"><STRONG>-in filename</STRONG></A></STRONG><DD>
<P>
This specifies filename of the PKCS#12 file to be parsed. Standard input is
used by default.
</P>
<DT><STRONG><A NAME="item__out"><STRONG>-out filename</STRONG></A></STRONG><DD>
<P>
The filename to write certificates and private keys to, standard output by
default. They are all written in PEM format.
</P>
<DT><STRONG><A NAME="item__passin"><STRONG>-passin arg</STRONG></A></STRONG><DD>
<P>
the PKCS#12 file (i.e. input file) password source. For more information
about the format of <STRONG>arg</STRONG> see the <STRONG>PASS PHRASE ARGUMENTS</STRONG> section in
<A HREF="openssl.html#">openssl(1)</A>.
</P>
<DT><STRONG><A NAME="item__passout"><STRONG>-passout arg</STRONG></A></STRONG><DD>
<P>
pass phrase source to encrypt any outputted private keys with. For more
information about the format of <STRONG>arg</STRONG> see the <STRONG>PASS PHRASE ARGUMENTS</STRONG> section in <A HREF="openssl.html#">openssl(1)</A>.
</P>
<DT><STRONG><A NAME="item__password"><STRONG>-password arg</STRONG></A></STRONG><DD>
<P>
With -export, -password is equivalent to -passout. Otherwise, -password is
equivalent to -passin.
</P>
<DT><STRONG><A NAME="item__noout"><STRONG>-noout</STRONG></A></STRONG><DD>
<P>
this option inhibits output of the keys and certificates to the output file
version of the PKCS#12 file.
</P>
<DT><STRONG><A NAME="item__clcerts"><STRONG>-clcerts</STRONG></A></STRONG><DD>
<P>
only output client certificates (not CA certificates).
</P>
<DT><STRONG><A NAME="item__cacerts"><STRONG>-cacerts</STRONG></A></STRONG><DD>
<P>
only output CA certificates (not client certificates).
</P>
<DT><STRONG><A NAME="item__nocerts"><STRONG>-nocerts</STRONG></A></STRONG><DD>
<P>
no certificates at all will be output.
</P>
<DT><STRONG><A NAME="item__nokeys"><STRONG>-nokeys</STRONG></A></STRONG><DD>
<P>
no private keys will be output.
</P>
<DT><STRONG><A NAME="item__info"><STRONG>-info</STRONG></A></STRONG><DD>
<P>
output additional information about the PKCS#12 file structure, algorithms
used and iteration counts.
</P>
<DT><STRONG><A NAME="item__des"><STRONG>-des</STRONG></A></STRONG><DD>
<P>
use DES to encrypt private keys before outputting.
</P>
<DT><STRONG><A NAME="item__des3"><STRONG>-des3</STRONG></A></STRONG><DD>
<P>
use triple DES to encrypt private keys before outputting, this is the
default.
</P>
<DT><STRONG><A NAME="item__idea"><STRONG>-idea</STRONG></A></STRONG><DD>
<P>
use IDEA to encrypt private keys before outputting.
</P>
<DT><STRONG><A NAME="item__aes128_"><STRONG>-aes128</STRONG>, <STRONG>-aes192</STRONG>, <STRONG>-aes256</STRONG></A></STRONG><DD>
<P>
use AES to encrypt private keys before outputting.
</P>
<DT><STRONG><A NAME="item__camellia128_"><STRONG>-camellia128</STRONG>, <STRONG>-camellia192</STRONG>, <STRONG>-camellia256</STRONG></A></STRONG><DD>
<P>
use Camellia to encrypt private keys before outputting.
</P>
<DT><STRONG><A NAME="item__nodes"><STRONG>-nodes</STRONG></A></STRONG><DD>
<P>
don't encrypt the private keys at all.
</P>
<DT><STRONG><A NAME="item__nomacver"><STRONG>-nomacver</STRONG></A></STRONG><DD>
<P>
don't attempt to verify the integrity MAC before reading the file.
</P>
<DT><STRONG><A NAME="item__twopass"><STRONG>-twopass</STRONG></A></STRONG><DD>
<P>
prompt for separate integrity and encryption passwords: most software
always assumes these are the same so this option will render such PKCS#12
files unreadable.
</P>
</DL>
<P>
<HR>
<H1><A NAME="FILE_CREATION_OPTIONS">FILE CREATION OPTIONS</A></H1>
<DL>
<DT><STRONG><A NAME="item__export"><STRONG>-export</STRONG></A></STRONG><DD>
<P>
This option specifies that a PKCS#12 file will be created rather than
parsed.
</P>
<DT><STRONG><STRONG>-out filename</STRONG></STRONG><DD>
<P>
This specifies filename to write the PKCS#12 file to. Standard output is
used by default.
</P>
<DT><STRONG><STRONG>-in filename</STRONG></STRONG><DD>
<P>
The filename to read certificates and private keys from, standard input by
default. They must all be in PEM format. The order doesn't matter but one
private key and its corresponding certificate should be present. If
additional certificates are present they will also be included in the
PKCS#12 file.
</P>
<DT><STRONG><A NAME="item__inkey"><STRONG>-inkey filename</STRONG></A></STRONG><DD>
<P>
file to read private key from. If not present then a private key must be
present in the input file.
</P>
<DT><STRONG><A NAME="item__name"><STRONG>-name friendlyname</STRONG></A></STRONG><DD>
<P>
This specifies the ``friendly name'' for the certificate and private key.
This name is typically displayed in list boxes by software importing the
file.
</P>
<DT><STRONG><A NAME="item__certfile"><STRONG>-certfile filename</STRONG></A></STRONG><DD>
<P>
A filename to read additional certificates from.
</P>
<DT><STRONG><A NAME="item__caname"><STRONG>-caname friendlyname</STRONG></A></STRONG><DD>
<P>
This specifies the ``friendly name'' for other certificates. This option
may be used multiple times to specify names for all certificates in the
order they appear. Netscape ignores friendly names on other certificates
whereas MSIE displays them.
</P>
<DT><STRONG><A NAME="item__pass"><STRONG>-pass arg</STRONG>, <STRONG>-passout arg</STRONG></A></STRONG><DD>
<P>
the PKCS#12 file (i.e. output file) password source. For more information
about the format of <STRONG>arg</STRONG> see the <STRONG>PASS PHRASE ARGUMENTS</STRONG> section in
<A HREF="openssl.html#">openssl(1)</A>.
</P>
<DT><STRONG><STRONG>-passin password</STRONG></STRONG><DD>
<P>
pass phrase source to decrypt any input private keys with. For more
information about the format of <STRONG>arg</STRONG> see the <STRONG>PASS PHRASE ARGUMENTS</STRONG> section in
<A HREF="openssl.html#">openssl(1)</A>.
</P>
<DT><STRONG><A NAME="item__chain"><STRONG>-chain</STRONG></A></STRONG><DD>
<P>
if this option is present then an attempt is made to include the entire
certificate chain of the user certificate. The standard CA store is used
for this search. If the search fails it is considered a fatal error.
</P>
<DT><STRONG><A NAME="item__descert"><STRONG>-descert</STRONG></A></STRONG><DD>
<P>
encrypt the certificate using triple DES, this may render the PKCS#12 file
unreadable by some ``export grade'' software. By default the private key is
encrypted using triple DES and the certificate using 40 bit RC2.
</P>
<DT><STRONG><A NAME="item__keypbe"><STRONG>-keypbe alg</STRONG>, <STRONG>-certpbe alg</STRONG></A></STRONG><DD>
<P>
these options allow the algorithm used to encrypt the private key and
certificates to be selected. Any PKCS#5 v1.5 or PKCS#12 PBE algorithm name
can be used (see <STRONG>NOTES</STRONG> section for more information). If a a cipher name (as output by the <STRONG>list-cipher-algorithms</STRONG> command is specified then it is used with PKCS#5 v2.0. For interoperability
reasons it is advisable to only use PKCS#12 algorithms.
</P>
<DT><STRONG><A NAME="item__keyex_keysig"><STRONG>-keyex|-keysig</STRONG></A></STRONG><DD>
<P>
specifies that the private key is to be used for key exchange or just
signing. This option is only interpreted by MSIE and similar MS software.
Normally ``export grade'' software will only allow 512 bit RSA keys to be
used for encryption purposes but arbitrary length keys for signing. The <STRONG>-keysig</STRONG>
option marks the key for signing only. Signing only keys can be used for
S/MIME signing, authenticode (ActiveX control signing) and SSL client
authentication, however due to a bug only MSIE 5.0 and later support the
use of signing only keys for SSL client authentication.
</P>
<DT><STRONG><A NAME="item__macalg"><STRONG>-macalg digest</STRONG></A></STRONG><DD>
<P>
specify the MAC digest algorithm. If not included them SHA1 will be used.
</P>
<DT><STRONG><A NAME="item__nomaciter_"><STRONG>-nomaciter</STRONG>, <STRONG>-noiter</STRONG></A></STRONG><DD>
<P>
these options affect the iteration counts on the MAC and key algorithms.
Unless you wish to produce files compatible with MSIE 4.0 you should leave
these options alone.
</P>
<P>
To discourage attacks by using large dictionaries of common passwords the
algorithm that derives keys from passwords can have an iteration count
applied to it: this causes a certain part of the algorithm to be repeated
and slows it down. The MAC is used to check the file integrity but since it
will normally have the same password as the keys and certificates it could
also be attacked. By default both MAC and encryption iteration counts are
set to 2048, using these options the MAC and encryption iteration counts
can be set to 1, since this reduces the file security you should not use
these options unless you really have to. Most software supports both MAC
and key iteration counts. MSIE 4.0 doesn't support MAC iteration counts so
it needs the <STRONG>-nomaciter</STRONG>
option.
</P>
<DT><STRONG><A NAME="item__maciter"><STRONG>-maciter</STRONG></A></STRONG><DD>
<P>
This option is included for compatibility with previous versions, it used
to be needed to use MAC iterations counts but they are now used by default.
</P>
<DT><STRONG><A NAME="item__nomac"><STRONG>-nomac</STRONG></A></STRONG><DD>
<P>
don't attempt to provide the MAC integrity.
</P>
<DT><STRONG><A NAME="item__rand"><STRONG>-rand file(s)</STRONG></A></STRONG><DD>
<P>
a file or files containing random data used to seed the random number
generator, or an EGD socket (see <A HREF="../crypto/RAND_egd.html#">RAND_egd(3)</A>). Multiple files can be specified separated by a OS-dependent character.
The separator is <STRONG>;</STRONG> for MS-Windows, <STRONG>,</STRONG> for OpenVMS, and <STRONG>:</STRONG> for all others.
</P>
<DT><STRONG><A NAME="item__CAfile"><STRONG>-CAfile file</STRONG></A></STRONG><DD>
<P>
CA storage as a file.
</P>
<DT><STRONG><A NAME="item__CApath"><STRONG>-CApath dir</STRONG></A></STRONG><DD>
<P>
CA storage as a directory. This directory must be a standard certificate
directory: that is a hash of each subject name (using <STRONG>x509 -hash</STRONG>) should be linked to each certificate.
</P>
<DT><STRONG><A NAME="item__CSP"><STRONG>-CSP name</STRONG></A></STRONG><DD>
<P>
write <STRONG>name</STRONG> as a Microsoft CSP name.
</P>
</DL>
<P>
<HR>
<H1><A NAME="NOTES">NOTES</A></H1>
<P>
Although there are a large number of options most of them are very rarely
used. For PKCS#12 file parsing only <STRONG>-in</STRONG> and <STRONG>-out</STRONG> need to be used for PKCS#12 file creation <STRONG>-export</STRONG> and <STRONG>-name</STRONG> are also used.
</P>
<P>
If none of the <STRONG>-clcerts</STRONG>, <STRONG>-cacerts</STRONG> or <STRONG>-nocerts</STRONG> options are present then all certificates will be output in the order they
appear in the input PKCS#12 files. There is no guarantee that the first
certificate present is the one corresponding to the private key. Certain
software which requires a private key and certificate and assumes the first
certificate in the file is the one corresponding to the private key: this
may not always be the case. Using the <STRONG>-clcerts</STRONG> option will solve this problem by only outputting the certificate
corresponding to the private key. If the CA certificates are required then
they can be output to a separate file using the <STRONG>-nokeys -cacerts</STRONG> options to just output CA certificates.
</P>
<P>
The <STRONG>-keypbe</STRONG> and <STRONG>-certpbe</STRONG> algorithms allow the precise encryption algorithms for private keys and
certificates to be specified. Normally the defaults are fine but
occasionally software can't handle triple DES encrypted private keys, then
the option <STRONG>-keypbe PBE-SHA1-RC2-40</STRONG> can be used to reduce the private key encryption to 40 bit RC2. A complete
description of all algorithms is contained in the <STRONG>pkcs8</STRONG> manual page.
</P>
<P>
<HR>
<H1><A NAME="EXAMPLES">EXAMPLES</A></H1>
<P>
Parse a PKCS#12 file and output it to a file:
</P>
<PRE> openssl pkcs12 -in file.p12 -out file.pem
</PRE>
<P>
Output only client certificates to a file:
</P>
<PRE> openssl pkcs12 -in file.p12 -clcerts -out file.pem
</PRE>
<P>
Don't encrypt the private key: openssl pkcs12 -in file.p12 -out file.pem
-nodes
</P>
<P>
Print some info about a PKCS#12 file:
</P>
<PRE> openssl pkcs12 -in file.p12 -info -noout
</PRE>
<P>
Create a PKCS#12 file:
</P>
<PRE> openssl pkcs12 -export -in file.pem -out file.p12 -name &quot;My Certificate&quot;
</PRE>
<P>
Include some extra certificates:
</P>
<PRE> openssl pkcs12 -export -in file.pem -out file.p12 -name &quot;My Certificate&quot; \
  -certfile othercerts.pem
</PRE>
<P>
<HR>
<H1><A NAME="BUGS">BUGS</A></H1>
<P>
Some would argue that the PKCS#12 standard is one big bug :-)
</P>
<P>
Versions of OpenSSL before 0.9.6a had a bug in the PKCS#12 key generation
routines. Under rare circumstances this could produce a PKCS#12 file
encrypted with an invalid key. As a result some PKCS#12 files which
triggered this bug from other implementations (MSIE or Netscape) could not
be decrypted by OpenSSL and similarly OpenSSL could produce PKCS#12 files
which could not be decrypted by other implementations. The chances of
producing such a file are relatively small: less than 1 in 256.
</P>
<P>
A side effect of fixing this bug is that any old invalidly encrypted
PKCS#12 files cannot no longer be parsed by the fixed version. Under such
circumstances the <STRONG>pkcs12</STRONG> utility will report that the MAC is OK but fail with a decryption error
when extracting private keys.
</P>
<P>
This problem can be resolved by extracting the private keys and
certificates from the PKCS#12 file using an older version of OpenSSL and
recreating the PKCS#12 file from the keys and certificates using a newer
version of OpenSSL. For example:
</P>
<PRE> old-openssl -in bad.p12 -out keycerts.pem
 openssl -in keycerts.pem -export -name &quot;My PKCS#12 file&quot; -out fixed.p12
</PRE>
<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<A HREF="pkcs8.html#">pkcs8(1)</A>
</P>
        </td><td align="right" width="20" bgcolor="#ffffff">&nbsp;&nbsp;&nbsp;</td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" valign="top" width="100" bgcolor="#666699">&nbsp;</td><td align="left" width="20"><img src="../../images/page-corner-bl.gif" alt="" width="20" height="20"></td><td align="left" valign="top" bgcolor="#ffffff">&nbsp;</td><td align="right" width="20"><img src="../../images/page-corner-br.gif" alt="" width="20" height="20"></td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td colspan="5" bgcolor="#666699">&nbsp;</td></tr>
</table>
</body>
</html>

