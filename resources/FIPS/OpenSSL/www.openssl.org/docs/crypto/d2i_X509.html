<html>
<head>
<!--
     Copyright (c) 1998-2014 The OpenSSL Project, http://www.openssl.org/
     Author:   OpenSSL (openssl@openssl.org)
     Modified: 2014-09-05 18:00:38.
     Generated from ``d2i_X509.wml'' via WML 2.0.11 (19-Aug-2006).
               by OpenSSL (openssl@openssl.org)
               on 2014-09-05 18:01:04.

     DO NOT EDIT THIS FILE DIRECTLY! INSTEAD EDIT ``d2i_X509.wml''.
-->
<meta name="Copyright" content="1998-2014 The OpenSSL Project, http://www.openssl.org/">
<meta name="Author"    content="OpenSSL, openssl@openssl.org">
<meta name="Generator" content="WML 2.0.11 (19-Aug-2006)">
<meta name="Modified"  content="2014-09-05 18:00:38">
<title>OpenSSL: Documents, d2i_X509(3)</title>
<style type="text/css"><!--
BODY { position: absolute; left: 0px; top: 0px; background: #666699; }
A { text-decoration: none; font-weight: bold; }
A:link { text-decoration: none; font-weight: bold; color: #666699; }
A:visited { text-decoration: none; font-weight: bold; color: #666699; }
A:hover { text-decoration: none; font-weight: bold; color: #666699; text-decoration: underline; }
#red { color: #cc3333; }
#sf { font-family: arial,helvetica; font-variant: normal; font-style: normal; }
#sfl { font-weight: bold; font-family: arial,helvetica; font-size: 16pt; line-height: 16pt; font-variant: normal; font-style: normal; }
H1 { font-weight: bold; font-size: 18pt; line-height: 18pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H2 { font-weight: bold; font-size: 14pt; line-height: 14pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H3 { font-weight: bold; font-size: 12pt; line-height: 12pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
--></style>
</head>
<body link="#6666cc" alink="#6666cc" vlink="#6666cc" bgcolor="#666699" text="#000000"
      marginheight="0" leftmargin="0" rightmargin="0" topmargin="0">
<table width="100%" cellspacing="0" cellpadding="0" border="0" summary="">
  <tr><td align="left" width="100" bgcolor="#666699"><img src="../../images/page-head-tl.jpg" alt="OpenSSL" width="100" height="80"></td><td align="left" colspan="2" width="600" bgcolor="#666699"><img src="../../images/page-head-tm.jpg" alt="" width="600" height="80"></td><td align="right" width="20" bgcolor="#666699">&nbsp;&nbsp;&nbsp;</td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" width="100"><img src="../../images/page-head-bl.jpg" alt="" width="100" height="20"></td><td align="left" width="20"><img src="../../images/page-head-bm.jpg" alt="" width="20" height="20"></td><td align="left" width="100%" bgcolor="#ffffff">
<table cellspacing="0" cellpadding="0" border="0" summary="">
        <tr>
<td><font face="Arial,Helvetica">&nbsp;<a href="../index.html" onmouseover="self.status = '../'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../'; return true" onblur="self.status = ''; return true"><font color="#666666">Documents</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../apps/openssl.html" onmouseover="self.status = '../apps/openssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../apps/openssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">openssl(1)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../ssl/ssl.html" onmouseover="self.status = '../ssl/ssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../ssl/ssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">ssl(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="crypto.html" onmouseover="self.status = '../crypto/crypto.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../crypto/crypto.html'; return true" onblur="self.status = ''; return true"><font color="#666666">crypto(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../HOWTO/index.html" onmouseover="self.status = '../HOWTO/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../HOWTO/'; return true" onblur="self.status = ''; return true"><font color="#666666">HOWTO</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://wiki.openssl.org/" onmouseover="self.status = 'http://wiki.openssl.org/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = 'http://wiki.openssl.org/'; return true" onblur="self.status = ''; return true"><font color="#666666">Wiki</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../fips/index.html" onmouseover="self.status = '../fips/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../fips/'; return true" onblur="self.status = ''; return true"><font color="#666666">FIPS140</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="../misc/index.html" onmouseover="self.status = '../misc/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../misc/'; return true" onblur="self.status = ''; return true"><font color="#666666">misc</font></a></font>&nbsp;</td><td></td>
</tr>
      </table>
</td><td align="right" width="20"><img src="../../images/page-corner-tr.gif" alt="" width="20" height="20"></td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" valign="top" width="100" bgcolor="#666699"><table cellspacing="0" cellpadding="0" border="0" summary=""><tr><td><img src="../../images/page-navbar-top.jpg" alt="" width="100" height="11"></td></tr>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
function nb_imgNormal(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_n.src');
        self.status = '';
    }
}
function nb_imgSelect(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_s.src');
        self.status = '';
    }
}
function nb_imgOver(imgName, nohints, descript) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_o.src');
        if (! nohints) self.status = descript;
    }
}
// done hiding -->
</script>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_title_n = new Image();
    nb_img1_title_n.src = '../../images/page-navbar-ti-n.jpg';
    nb_img1_title_o = new Image();
    nb_img1_title_o.src = '../../images/page-navbar-ti-s.jpg';
    nb_img1_FAQ_n = new Image();
    nb_img1_FAQ_n.src = '../../images/page-navbar-fq-n.jpg';
    nb_img1_FAQ_o = new Image();
    nb_img1_FAQ_o.src = '../../images/page-navbar-fq-s.jpg';
    nb_img1_about_n = new Image();
    nb_img1_about_n.src = '../../images/page-navbar-ab-n.jpg';
    nb_img1_about_o = new Image();
    nb_img1_about_o.src = '../../images/page-navbar-ab-s.jpg';
    nb_img1_news_n = new Image();
    nb_img1_news_n.src = '../../images/page-navbar-ne-n.jpg';
    nb_img1_news_o = new Image();
    nb_img1_news_o.src = '../../images/page-navbar-ne-s.jpg';
    nb_img1_docs_s = new Image();
    nb_img1_docs_s.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_docs_o = new Image();
    nb_img1_docs_o.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_source_n = new Image();
    nb_img1_source_n.src = '../../images/page-navbar-so-n.jpg';
    nb_img1_source_o = new Image();
    nb_img1_source_o.src = '../../images/page-navbar-so-s.jpg';
    nb_img1_contrib_n = new Image();
    nb_img1_contrib_n.src = '../../images/page-navbar-co-n.jpg';
    nb_img1_contrib_o = new Image();
    nb_img1_contrib_o.src = '../../images/page-navbar-co-s.jpg';
    nb_img1_support_n = new Image();
    nb_img1_support_n.src = '../../images/page-navbar-su-n.jpg';
    nb_img1_support_o = new Image();
    nb_img1_support_o.src = '../../images/page-navbar-su-s.jpg';
    nb_img1_related_n = new Image();
    nb_img1_related_n.src = '../../images/page-navbar-re-n.jpg';
    nb_img1_related_o = new Image();
    nb_img1_related_o.src = '../../images/page-navbar-re-s.jpg';
}
// done hiding -->
</script>
<tr><td><a href="../../index.html" onmouseover="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onmouseout="nb_imgNormal('nb_img1_title'); return true" onfocus="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onblur="nb_imgNormal('nb_img1_title'); return true"><img name="nb_img1_title" src="../../images/page-navbar-ti-n.jpg" alt="Title" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../support/faq.html" onmouseover="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onmouseout="nb_imgNormal('nb_img1_FAQ'); return true" onfocus="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onblur="nb_imgNormal('nb_img1_FAQ'); return true"><img name="nb_img1_FAQ" src="../../images/page-navbar-fq-n.jpg" alt="FAQ" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../about/index.html" onmouseover="nb_imgOver('nb_img1_about', 0, 'About'); return true" onmouseout="nb_imgNormal('nb_img1_about'); return true" onfocus="nb_imgOver('nb_img1_about', 0, 'About'); return true" onblur="nb_imgNormal('nb_img1_about'); return true"><img name="nb_img1_about" src="../../images/page-navbar-ab-n.jpg" alt="About" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../news/index.html" onmouseover="nb_imgOver('nb_img1_news', 0, 'News'); return true" onmouseout="nb_imgNormal('nb_img1_news'); return true" onfocus="nb_imgOver('nb_img1_news', 0, 'News'); return true" onblur="nb_imgNormal('nb_img1_news'); return true"><img name="nb_img1_news" src="../../images/page-navbar-ne-n.jpg" alt="News" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../index.html" onmouseover="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onmouseout="nb_imgSelect('nb_img1_docs'); return true" onfocus="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onblur="nb_imgSelect('nb_img1_docs'); return true"><img name="nb_img1_docs" src="../../images/page-navbar-do-s.jpg" alt="Documents" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../source/index.html" onmouseover="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onmouseout="nb_imgNormal('nb_img1_source'); return true" onfocus="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onblur="nb_imgNormal('nb_img1_source'); return true"><img name="nb_img1_source" src="../../images/page-navbar-so-n.jpg" alt="Source" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../contrib/index.html" onmouseover="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onmouseout="nb_imgNormal('nb_img1_contrib'); return true" onfocus="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onblur="nb_imgNormal('nb_img1_contrib'); return true"><img name="nb_img1_contrib" src="../../images/page-navbar-co-n.jpg" alt="Contribution" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../support/index.html" onmouseover="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onmouseout="nb_imgNormal('nb_img1_support'); return true" onfocus="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onblur="nb_imgNormal('nb_img1_support'); return true"><img name="nb_img1_support" src="../../images/page-navbar-su-n.jpg" alt="Support" border="0" width="100" height="27"></a></td></tr>
<tr><td><a href="../../related/index.html" onmouseover="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onmouseout="nb_imgNormal('nb_img1_related'); return true" onfocus="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onblur="nb_imgNormal('nb_img1_related'); return true"><img name="nb_img1_related" src="../../images/page-navbar-re-n.jpg" alt="Related" border="0" width="100" height="27"></a></td></tr>
    <tr><td><img src="../../images/page-navbar-bot.jpg" alt="" width="100" height="150"><br><p></td></tr>
  </table>
</td><td align="left" valign="top" width="20" bgcolor="#ffffff">&nbsp;</td><td align="left" valign="top" bgcolor="#ffffff"><br>
        
<h1>d2i_X509(3)</h1>
<!-- INDEX BEGIN -->
<UL>
	<LI><A HREF="d2i_X509.html#NAME">NAME</A>
	<LI><A HREF="d2i_X509.html#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="d2i_X509.html#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="d2i_X509.html#NOTES">NOTES</A>
	<LI><A HREF="d2i_X509.html#EXAMPLES">EXAMPLES</A>
	<LI><A HREF="d2i_X509.html#WARNINGS">WARNINGS</A>
	<LI><A HREF="d2i_X509.html#BUGS">BUGS</A>
	<LI><A HREF="d2i_X509.html#RETURN_VALUES">RETURN VALUES</A>
	<LI><A HREF="d2i_X509.html#SEE_ALSO">SEE ALSO</A>
	<LI><A HREF="d2i_X509.html#HISTORY">HISTORY</A>
</UL>
<!-- INDEX END -->
<HR>
<P>
<HR>
<H1><A NAME="NAME">NAME</A></H1>
<P>
d2i_X509, i2d_X509, d2i_X509_bio, d2i_X509_fp, i2d_X509_bio, i2d_X509_fp -
X509 encode and decode functions
</P>
<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<PRE> #include &lt;openssl/x509.h&gt;
</PRE>
<PRE> X509 *d2i_X509(X509 **px, const unsigned char **in, int len);
 int i2d_X509(X509 *x, unsigned char **out);
</PRE>
<PRE> X509 *d2i_X509_bio(BIO *bp, X509 **x);
 X509 *d2i_X509_fp(FILE *fp, X509 **x);
</PRE>
<PRE> int i2d_X509_bio(BIO *bp, X509 *x);
 int i2d_X509_fp(FILE *fp, X509 *x);
</PRE>
<PRE> int i2d_re_X509_tbs(X509 *x, unsigned char **out);
</PRE>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
The X509 encode and decode routines encode and parse an
<STRONG>X509</STRONG> structure, which represents an X509 certificate.
</P>
<P>
<CODE>d2i_X509()</CODE> attempts to decode <STRONG>len</STRONG> bytes at <STRONG>*in</STRONG>. If successful a pointer to the <STRONG>X509</STRONG> structure is returned. If an error occurred then <STRONG>NULL</STRONG> is returned. If <STRONG>px</STRONG> is not <STRONG>NULL</STRONG> then the returned structure is written to <STRONG>*px</STRONG>. If <STRONG>*px</STRONG> is not <STRONG>NULL</STRONG>
then it is assumed that <STRONG>*px</STRONG> contains a valid <STRONG>X509</STRONG>
structure and an attempt is made to reuse it. If the call is successful <STRONG>*in</STRONG> is incremented to the byte following the parsed data.
</P>
<P>
<CODE>i2d_X509()</CODE> encodes the structure pointed to by <STRONG>x</STRONG> into DER format. If <STRONG>out</STRONG> is not <STRONG>NULL</STRONG> is writes the DER encoded data to the buffer at <STRONG>*out</STRONG>, and increments it to point after the data just written. If the return
value is negative an error occurred, otherwise it returns the length of the
encoded data.
</P>
<P>
For OpenSSL 0.9.7 and later if <STRONG>*out</STRONG> is <STRONG>NULL</STRONG> memory will be allocated for a buffer and the encoded data written to it.
In this case <STRONG>*out</STRONG> is not incremented and it points to the start of the data just written.
</P>
<P>
<CODE>d2i_X509_bio()</CODE> is similar to <CODE>d2i_X509()</CODE> except it
attempts to parse data from BIO <STRONG>bp</STRONG>.
</P>
<P>
<CODE>d2i_X509_fp()</CODE> is similar to <CODE>d2i_X509()</CODE> except it
attempts to parse data from FILE pointer <STRONG>fp</STRONG>.
</P>
<P>
<CODE>i2d_X509_bio()</CODE> is similar to <CODE>i2d_X509()</CODE> except it
writes the encoding of the structure <STRONG>x</STRONG> to BIO <STRONG>bp</STRONG> and it returns 1 for success and 0 for failure.
</P>
<P>
<CODE>i2d_X509_fp()</CODE> is similar to <CODE>i2d_X509()</CODE> except it
writes the encoding of the structure <STRONG>x</STRONG> to BIO <STRONG>bp</STRONG> and it returns 1 for success and 0 for failure.
</P>
<P>
<CODE>i2d_re_X509_tbs()</CODE> is similar to <CODE>i2d_X509()</CODE> except
it encodes only the TBSCertificate portion of the certificate.
</P>
<P>
<HR>
<H1><A NAME="NOTES">NOTES</A></H1>
<P>
The letters <STRONG>i</STRONG> and <STRONG>d</STRONG> in for example <STRONG>i2d_X509</STRONG> stand for ``internal'' (that is an internal C structure) and ``DER''. So
<STRONG>i2d_X509</STRONG> converts from internal to DER. The ``re'' in
<STRONG>i2d_re_X509_tbs</STRONG> stands for ``re-encode'', and ensures that a fresh encoding is generated in
case the object has been modified after creation (see the BUGS section).
</P>
<P>
The functions can also understand <STRONG>BER</STRONG> forms.
</P>
<P>
The actual X509 structure passed to <CODE>i2d_X509()</CODE> must be a valid
populated <STRONG>X509</STRONG> structure it can <STRONG>not</STRONG> simply be fed with an empty structure such as that returned by
<CODE>X509_new().</CODE>
</P>
<P>
The encoded data is in binary form and may contain embedded zeroes.
Therefore any FILE pointers or BIOs should be opened in binary mode.
Functions such as <STRONG>strlen()</STRONG> will <STRONG>not</STRONG> return the correct length of the encoded structure.
</P>
<P>
The ways that <STRONG>*in</STRONG> and <STRONG>*out</STRONG> are incremented after the operation can trap the unwary. See the <STRONG>WARNINGS</STRONG> section for some common errors.
</P>
<P>
The reason for the auto increment behaviour is to reflect a typical usage
of ASN1 functions: after one structure is encoded or decoded another will
processed after it.
</P>
<P>
<HR>
<H1><A NAME="EXAMPLES">EXAMPLES</A></H1>
<P>
Allocate and encode the DER encoding of an X509 structure:
</P>
<PRE> int len;
 unsigned char *buf, *p;
</PRE>
<PRE> len = i2d_X509(x, NULL);
</PRE>
<PRE> buf = OPENSSL_malloc(len);
</PRE>
<PRE> if (buf == NULL)
        /* error */
</PRE>
<PRE> p = buf;
</PRE>
<PRE> i2d_X509(x, &amp;p);
</PRE>
<P>
If you are using OpenSSL 0.9.7 or later then this can be simplified to:
</P>
<PRE> int len;
 unsigned char *buf;
</PRE>
<PRE> buf = NULL;
</PRE>
<PRE> len = i2d_X509(x, &amp;buf);
</PRE>
<PRE> if (len &lt; 0)
        /* error */
</PRE>
<P>
Attempt to decode a buffer:
</P>
<PRE> X509 *x;
</PRE>
<PRE> unsigned char *buf, *p;
</PRE>
<PRE> int len;
</PRE>
<PRE> /* Something to setup buf and len */
</PRE>
<PRE> p = buf;
</PRE>
<PRE> x = d2i_X509(NULL, &amp;p, len);
</PRE>
<PRE> if (x == NULL)
    /* Some error */
</PRE>
<P>
Alternative technique:
</P>
<PRE> X509 *x;
</PRE>
<PRE> unsigned char *buf, *p;
</PRE>
<PRE> int len;
</PRE>
<PRE> /* Something to setup buf and len */
</PRE>
<PRE> p = buf;
</PRE>
<PRE> x = NULL;
</PRE>
<PRE> if(!d2i_X509(&amp;x, &amp;p, len))
    /* Some error */
</PRE>
<P>
<HR>
<H1><A NAME="WARNINGS">WARNINGS</A></H1>
<P>
The use of temporary variable is mandatory. A common mistake is to attempt
to use a buffer directly as follows:
</P>
<PRE> int len;
 unsigned char *buf;
</PRE>
<PRE> len = i2d_X509(x, NULL);
</PRE>
<PRE> buf = OPENSSL_malloc(len);
</PRE>
<PRE> if (buf == NULL)
        /* error */
</PRE>
<PRE> i2d_X509(x, &amp;buf);
</PRE>
<PRE> /* Other stuff ... */
</PRE>
<PRE> OPENSSL_free(buf);
</PRE>
<P>
This code will result in <STRONG>buf</STRONG> apparently containing garbage because it was incremented after the call to
point after the data just written. Also <STRONG>buf</STRONG> will no longer contain the pointer allocated by <STRONG>OPENSSL_malloc()</STRONG>
and the subsequent call to <STRONG>OPENSSL_free()</STRONG> may well crash.
</P>
<P>
The auto allocation feature (setting buf to NULL) only works on OpenSSL
0.9.7 and later. Attempts to use it on earlier versions will typically
cause a segmentation violation.
</P>
<P>
Another trap to avoid is misuse of the <STRONG>xp</STRONG> argument to <STRONG>d2i_X509()</STRONG>:
</P>
<PRE> X509 *x;
</PRE>
<PRE> if (!d2i_X509(&amp;x, &amp;p, len))
        /* Some error */
</PRE>
<P>
This will probably crash somewhere in <STRONG>d2i_X509()</STRONG>. The reason for this is that the variable <STRONG>x</STRONG> is uninitialized and an attempt will be made to interpret its (invalid)
value as an <STRONG>X509</STRONG> structure, typically causing a segmentation violation. If <STRONG>x</STRONG> is set to NULL first then this will not happen.
</P>
<P>
<HR>
<H1><A NAME="BUGS">BUGS</A></H1>
<P>
In some versions of OpenSSL the ``reuse'' behaviour of
<CODE>d2i_X509()</CODE> when
<STRONG>*px</STRONG> is valid is broken and some parts of the reused structure may persist if
they are not present in the new one. As a result the use of this ``reuse''
behaviour is strongly discouraged.
</P>
<P>
<CODE>i2d_X509()</CODE> will not return an error in many versions of
OpenSSL, if mandatory fields are not initialized due to a programming error
then the encoded structure may contain invalid data or omit the fields
entirely and will not be parsed by <CODE>d2i_X509().</CODE> This may be
fixed in future so code should not assume that <CODE>i2d_X509()</CODE> will
always succeed.
</P>
<P>
The encoding of the TBSCertificate portion of a certificate is cached in
the <STRONG>X509</STRONG> structure internally to improve encoding performance and to ensure
certificate signatures are verified correctly in some certificates with
broken (non-DER) encodings.
</P>
<P>
Any function which encodes an X509 structure such as
<CODE>i2d_X509(),</CODE> <CODE>i2d_X509_fp()</CODE> or
<CODE>i2d_X509_bio()</CODE> may return a stale encoding if the
<STRONG>X509</STRONG> structure has been modified after deserialization or previous
serialization.
</P>
<P>
If, after modification, the <STRONG>X509</STRONG> object is re-signed with <CODE>X509_sign(),</CODE> the encoding is
automatically renewed. Otherwise, the encoding of the TBSCertificate
portion of the <STRONG>X509</STRONG> can be manually renewed by calling <CODE>i2d_re_X509_tbs().</CODE>
</P>
<P>
<HR>
<H1><A NAME="RETURN_VALUES">RETURN VALUES</A></H1>
<P>
<CODE>d2i_X509(),</CODE> <CODE>d2i_X509_bio()</CODE> and
<CODE>d2i_X509_fp()</CODE> return a valid <STRONG>X509</STRONG> structure or <STRONG>NULL</STRONG> if an error occurs. The error code that can be obtained by
<A HREF="ERR_get_error.html#">ERR_get_error(3)</A>.
</P>
<P>
<CODE>i2d_X509()</CODE> returns the number of bytes successfully encoded or
a negative value if an error occurs. The error code can be obtained by
<A HREF="ERR_get_error.html#">ERR_get_error(3)</A>.
</P>
<P>
<CODE>i2d_X509_bio()</CODE> and <CODE>i2d_X509_fp()</CODE> return 1 for
success and 0 if an error occurs The error code can be obtained by <A HREF="ERR_get_error.html#">ERR_get_error(3)</A>.
</P>
<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<A HREF="ERR_get_error.html#">ERR_get_error(3)</A>
</P>
<P>
<HR>
<H1><A NAME="HISTORY">HISTORY</A></H1>
<P>
d2i_X509, i2d_X509, d2i_X509_bio, d2i_X509_fp, i2d_X509_bio and i2d_X509_fp
are available in all versions of SSLeay and OpenSSL.
</P>
        </td><td align="right" width="20" bgcolor="#ffffff">&nbsp;&nbsp;&nbsp;</td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td align="left" valign="top" width="100" bgcolor="#666699">&nbsp;</td><td align="left" width="20"><img src="../../images/page-corner-bl.gif" alt="" width="20" height="20"></td><td align="left" valign="top" bgcolor="#ffffff">&nbsp;</td><td align="right" width="20"><img src="../../images/page-corner-br.gif" alt="" width="20" height="20"></td><td align="right" width="50" bgcolor="#666699">&nbsp;</td></tr>
  <tr><td colspan="5" bgcolor="#666699">&nbsp;</td></tr>
</table>
</body>
</html>

